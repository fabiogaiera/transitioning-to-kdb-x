#!/bin/bash

# Permissions: Make sure that chmod +x script has been executed
# Usage: ./script

# Check if a directory was provided
if [ -z "$1" ]; then
    echo "Usage: $0 <directory>"
    exit 1
fi

DIRECTORY="$1"

# Check if the directory exists
if [ ! -d "$DIRECTORY" ]; then
    echo "Error: '$DIRECTORY' is not a directory."
    exit 1
fi

# Loop through all .zip files in the directory
for zipfile in "$DIRECTORY"/*.zip; do
    # Check if any .zip files exist
    if [ ! -e "$zipfile" ]; then
        echo "No .zip files found in $DIRECTORY"
        exit 0
    fi

    echo "Decompressing: $zipfile"
    unzip "$zipfile" -d "$DIRECTORY"

    if [ $? -eq 0 ]; then
        echo "Deleting original: $zipfile"
        rm "$zipfile"
    else
        echo "Failed to unzip: $zipfile"
    fi
done
